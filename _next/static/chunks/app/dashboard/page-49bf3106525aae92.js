(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6100:function(e,t,r){Promise.resolve().then(r.bind(r,3077))},3077:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7437),l=r(2265),i=r(8355),s=r.n(i);r(6648);var a=r(8806),o=r(765),u=r(3582),c=r(7286),h=r(3673),d=r(2768),p=r(468);class x{createElementNS(e,t){return new b(this,t)}createElement(e){return new b(this,e)}createTextNode(e){return new j(this,e)}querySelector(){return null}querySelectorAll(){return[]}constructor(){this.documentElement=new b(this,"html")}}class m{setProperty(){}removeProperty(){}}m.empty=new m;class b{setAttribute(e,t){this.attributes[e]=String(t)}setAttributeNS(e,t,r){this.setAttribute(t,r)}getAttribute(e){return this.attributes[e]}getAttributeNS(e){return this.getAttribute(e)}hasAttribute(e){return e in this.attributes}hasAttributeNS(e){return this.hasAttribute(e)}removeAttribute(e){delete this.attributes[e]}removeAttributeNS(e,t){this.removeAttribute(t)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let e of t)this.appendChild((null==e?void 0:e.ownerDocument)?e:this.ownerDocument.createTextNode(e))}appendChild(e){return this.children.push(e),e.parentNode=this,e}insertBefore(e,t){if(null==t)this.children.push(e);else{let r=this.children.indexOf(t);if(r<0)throw Error("insertBefore reference node not found");this.children.splice(r,0,e)}return e.parentNode=this,e}querySelector(){return null}querySelectorAll(){return[]}set textContent(e){this.children=[this.ownerDocument.createTextNode(e)]}set style(e){this.attributes.style=e}get style(){return m.empty}toHyperScript(){return l.createElement(this.tagName,this.attributes,this.children.map(e=>e.toHyperScript()))}constructor(e,t){this.ownerDocument=e,this.tagName=t,this.attributes={},this.children=[],this.parentNode=null}}class j{toHyperScript(){return this.nodeValue}constructor(e,t){this.ownerDocument=e,this.nodeValue=String(t)}}function y(e){let{options:t}=e;return a.g({...t,document:new x}).toHyperScript()}function f(e){let{data:t}=e,r={x:t[1],y:t[2]},l={grid:!0};t[4]&&(r.stroke=t[4],l.color={legend:!0});let i=t[1]?{area:o.C7(t[0],r),bar:u.we(t[0],r),dot:c.AK(t[0],r),line:h.$w(t[0],r)}:{text:d.fL([t[0]],{frameAnchor:"middle"})},s=t[1]?t[3].map(e=>i[e]):[i.text];return l.marks=[p.W(),...s],(0,n.jsx)(y,{options:l})}r(1537),r(6253);var g=r(357);function S(){let[e,t]=(0,l.useState)(),[r,i]=(0,l.useState)(null),[a,o]=(0,l.useState)(null),[u,c]=(0,l.useState)(null),[h,d]=(0,l.useState)(null),[p,x]=(0,l.useState)(null),[m,b]=(0,l.useState)(null),[j,y]=(0,l.useState)(null),[S,v]=(0,l.useState)(null);async function A(e){e.preventDefault();try{let t=new FormData(e.currentTarget),r={};t.forEach((e,t)=>r[t]=e);let n=g.env.NEXT_PUBLIC_DATAVIZ_URL,l=await fetch("http://"+n+":8080/backspring/gen_pdata",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)}),s=await l.json();i(s),console.log(s),o(Object.keys(s[0])[0]),c(Object.keys(s[0])[1]),v(null)}catch(e){i(e.message),o(null),c(null)}}return console.log(h,p,m,j),(0,n.jsxs)("main",{children:[(0,n.jsxs)("div",{id:"view-pane",children:[r?(0,n.jsx)(f,{data:[r,a,u,[h,p,m,j],S]}):"",(0,n.jsxs)("div",{id:"selector",children:[(0,n.jsx)("h2",{children:"Plot Style"}),(0,n.jsxs)("ul",{className:"plotstyle",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"dot",children:"Dot Plot"}),(0,n.jsx)("input",{type:"checkbox",id:"dot",onChange:e=>{e.target.checked?d("dot"):d(null)}})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"line",children:"Line Plot"}),(0,n.jsx)("input",{type:"checkbox",id:"line",onChange:e=>{e.target.checked?x("line"):x(null)}})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"area",children:"Area Plot"}),(0,n.jsx)("input",{type:"checkbox",id:"area",onChange:e=>{e.target.checked?b("area"):b(null)}})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"bar",children:"Bar chart"}),(0,n.jsx)("input",{type:"checkbox",id:"bar",onChange:e=>{e.target.checked?y("bar"):y(null)}})]})]})]})]}),(0,n.jsxs)("section",{id:"input-section",children:[(0,n.jsxs)("form",{method:"post",encType:"multipart/form-data",onSubmit:t=>{let n;t.preventDefault();let l=new FileReader;l.readAsText(e),l.onload=()=>{if("text/csv"===e.type){let{data:e,errors:t}=s().parse(l.result);0===t.length&&(n=function(e){let t=e.length;return e.slice(1,t).map(t=>{let r={};for(let n=0;n<t.length;n++){let l=parseFloat(t[n]);r[e[0][n]]=l||t[n]}return r})}(e))}else n=JSON.parse(l.result);i(n),a||o(Object.keys(n[0])[0]),u||c(Object.keys(n[0])[1]),console.log(e.type,r)}},children:[(0,n.jsx)("label",{htmlFor:"file",children:"Input File"}),(0,n.jsx)("input",{id:"file",type:"file",name:"file-input",accept:".csv,.json",onChange:e=>t(e.target.files[0])}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"x",children:"X-axis label"}),(0,n.jsx)("input",{id:"x",type:"text",name:"x-legend",onChange:e=>o(e.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"y",children:"Y-axis label"}),(0,n.jsx)("input",{id:"y",type:"text",name:"y-legend",onChange:e=>c(e.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"category",children:"Categorizer"}),(0,n.jsx)("input",{id:"category",type:"text",name:"category-spec",onChange:e=>{let t=null;if(r)for(let n of Object.keys(r[0]))n===e.target.value&&(console.log(n),t=e.target.value);v(t)}}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{type:"submit",children:"Plot File"})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("form",{method:"post",encType:"multipart/form-data",onSubmit:A,children:[(0,n.jsx)("label",{htmlFor:"formula",children:"Type Formula"}),(0,n.jsx)("input",{id:"formula",type:"text",name:"formula_input"}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"size",children:"Size"}),(0,n.jsx)("input",{id:"size",type:"text",name:"sample_size"}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"start",children:"Start Point"}),(0,n.jsx)("input",{id:"start",type:"text",name:"start_point"}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"interval",children:"Interval"}),(0,n.jsx)("input",{id:"interval",type:"text",name:"sample_interval"}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{type:"submit",id:"push",children:"Plot Formula"})]})]})]})}},6253:function(){},1537:function(){}},function(e){e.O(0,[812,173,134,971,23,744],function(){return e(e.s=6100)}),_N_E=e.O()}]);